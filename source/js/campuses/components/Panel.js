import React, {useContext} from 'react';
import {LangContext} from "./LangContext";

const Panel = ({campus, panelIsOpen, onClosePanel}) => {
  const {title, fullTitle, address, enTitle, enFullTitle, enAddress, transport, photo, lat, lon} = campus;
  const {bus, trolleybus, tram} = {...transport};
  const EN = useContext(LangContext);

  let buildingTitle='';
  if (EN) {
    buildingTitle = enFullTitle ? enFullTitle : enTitle;
  } else {
    buildingTitle = fullTitle ? fullTitle : title;
  }

  return (

    <div className={`panel ${(panelIsOpen) ? `isOpen` : ``}`}>

      <div className="panel__close-button-wrapper">
        <div className="close-button" onClick={onClosePanel}>
          <div className="in">
            <div className="close-button-block"/>
            <div className="close-button-block"/>
          </div>
          <div className="out">
            <div className="close-button-block"/>
            <div className="close-button-block"/>
          </div>
        </div>
      </div>

      <div className="panel__image-container">
        {photo && <img src={photo} alt={title}/>}
      </div>

      <div className="panel__info-container">
        <p className="panel__title">{ buildingTitle }</p>
        <p className="panel__address">{!EN ? address : enAddress}</p>

        {transport && <div>
          <p className="panel__transport">{`${!EN ? 'Как добраться:' : 'Route'}`}</p>
          {bus && <div>
            <p className="mb-0">{`${!EN ? 'Автобусы и маршрутные такси:' : 'Buses'}`}</p>
            <p className="mb-1">
              <span className="panel__icon">
                <svg enableBackground="new 0 0 512.004 512.004"  width="60" height="40"  viewBox="0 0 512.004 512.004"
                     xmlns="http://www.w3.org/2000/svg"><g fill="#fff"><path
                  d="m383.158 308.353c-17.572 0-31.868 14.296-31.868 31.868s14.296 31.868 31.868 31.868 31.868-14.296 31.868-31.868-14.296-31.868-31.868-31.868zm0 48.735c-9.301 0-16.868-7.567-16.868-16.868s7.567-16.868 16.868-16.868 16.868 7.567 16.868 16.868-7.567 16.868-16.868 16.868z"/><path
                  d="m101.142 308.353c-17.572 0-31.868 14.296-31.868 31.868s14.296 31.868 31.868 31.868 31.868-14.296 31.868-31.868-14.296-31.868-31.868-31.868zm0 48.735c-9.301 0-16.868-7.567-16.868-16.868s7.567-16.868 16.868-16.868 16.868 7.567 16.868 16.868-7.568 16.868-16.868 16.868z"/><path
                  d="m500.176 167.304c-.994-3.105-3.882-5.213-7.143-5.213h-24.882l-3.477-11.851v-.001l-2.416-8.237c-.052-.177-.11-.353-.175-.526-5.825-15.508-20.869-25.928-37.436-25.928h-405.381c-10.623.001-19.266 8.643-19.266 19.266v193.641c0 10.623 8.643 19.266 19.266 19.266h26.156c3.68 27.473 27.257 48.735 55.72 48.735s52.041-21.262 55.72-48.735h170.576c3.68 27.473 27.257 48.735 55.72 48.735s52.041-21.262 55.72-48.735h37.488c10.623 0 19.266-8.643 19.266-19.266v-51.102-.723c0-18.605-3.301-36.873-9.811-54.303l-13.27-45.235h15.008l9.798 30.603c1.02 3.185 3.967 5.215 7.141 5.215 5.089 0 8.691-4.961 7.145-9.789zm-19.711 102.549h-41.045c-3.152 0-6.241-1.086-8.698-3.06-11.688-9.387-25.224-20.258-36.999-29.714-1.542-1.238-3.214-2.286-4.962-3.177v-74.052h63.102c1.777 6.058 17.294 58.955 19.642 66.961.911 3.129 7.79 19.013 8.96 43.042zm-186.385-39.14v-17.55c0-4.142-3.357-7.5-7.5-7.5s-7.5 3.358-7.5 7.5v17.55h-13.415v-70.863h13.415v18.313c0 4.142 3.357 7.5 7.5 7.5s7.5-3.358 7.5-7.5v-18.313h51.265v70.863zm-94.68 0v-70.863h51.265v70.863zm-94.68 0v-70.863h51.265v70.863zm-89.72 0v-70.863h46.305v70.863zm61.305-70.863h13.415v70.863h-13.415zm94.679 0h13.416v70.863h-13.416zm189.361 0h13.416v70.863h-13.416zm-345.345-25.036c0-2.312 1.953-4.266 4.266-4.266h405.383c9.656 0 18.534 5.746 22.583 14.302-28.728 0-415.431 0-432.231 0v-10.036zm86.142 246.642c-22.737 0-41.235-18.498-41.235-41.235s18.498-41.235 41.235-41.235 41.235 18.498 41.235 41.235-18.498 41.235-41.235 41.235zm282.016 0c-22.737 0-41.235-18.498-41.235-41.235s18.498-41.235 41.235-41.235 41.235 18.498 41.235 41.235-18.497 41.235-41.235 41.235zm93.208-48.736h-37.471c-3.706-27.722-27.556-48.735-55.737-48.735-28.641 0-52.095 21.49-55.737 48.735h-170.542c-3.659-27.374-27.241-48.735-55.737-48.735-28.457 0-52.07 21.302-55.737 48.735h-26.139c-2.313 0-4.266-1.954-4.266-4.266v-53.779h206.409c4.143 0 7.5-3.358 7.5-7.5s-3.357-7.5-7.5-7.5h-206.409v-13.963h360.632c3.001 0 6.166 1.027 8.698 3.061l13.575 10.902h-141.496c-4.143 0-7.5 3.358-7.5 7.5s3.357 7.5 7.5 7.5h160.173l4.747 3.812c5.11 4.104 11.535 6.365 18.091 6.365h41.212v43.602c0 2.313-1.953 4.266-4.266 4.266z"/></g></svg>
              </span>
              {transport.bus}
            </p>
          </div>}

          {trolleybus && <div>
            <p className="mb-0">{`${!EN ? 'Троллейбусы' : 'Trolleybuses'}`}</p>
            <p className="mb-1">
              <span className="panel__icon">
                <svg fill="#fff" xmlns="http://www.w3.org/2000/svg" width="55" height="35" viewBox="0 0 511.99 511.99"><path d="M479.992 175.992H319.994v-21.328c0-5.891-4.766-10.672-10.671-10.672h-26.874L200.325 41.338c-3.688-4.601-10.391-5.351-15-1.672-4.594 3.68-5.344 10.398-1.656 14.992l71.467 89.334h-26.015L146.982 41.338c-3.672-4.601-10.375-5.351-14.984-1.672-4.594 3.68-5.344 10.398-1.672 14.992l71.467 89.334h-20.467c-5.875 0-10.656 4.781-10.656 10.672v21.328H32c-17.641 0-32 14.359-32 32v181.325c0 17.656 14.359 31.999 32 31.999h10.671c0 29.406 23.921 53.344 53.327 53.344s53.327-23.938 53.327-53.344h191.996c0 29.406 23.938 53.344 53.343 53.344 29.405 0 53.327-23.938 53.327-53.344h32c17.64 0 31.999-14.343 31.999-31.999V207.993c.001-17.642-14.358-32.001-31.998-32.001zm-255.995-10.664h74.672v10.664h-106.67v-10.664h31.998zM47.14 399.988H32c-5.891 0-10.672-4.781-10.672-10.672h32.031a52.641 52.641 0 00-6.219 10.672zm48.859 53.327c-17.64 0-32-14.344-32-32 0-17.64 14.359-31.999 32-31.999s32 14.359 32 31.999c-.001 17.657-14.36 32-32 32zm74.67-149.324h-42.671v-64h42.671v64zm63.999 95.997h-42.671v-74.671h42.671v74.671zm0-95.997h-42.671v-64h42.671v64zm63.999 95.997h-42.671v-74.671h42.671v74.671zm0-95.998h-42.671v-64h42.671v64zm95.998 149.325c-17.655 0-31.999-14.344-31.999-32 0-17.64 14.344-31.999 31.999-31.999 17.64 0 31.999 14.359 31.999 31.999 0 17.657-14.359 32-31.999 32zm95.998-106.654H469.32c-5.875 0-10.656 4.766-10.656 10.656s4.781 10.672 10.656 10.672h21.343v21.327c0 5.891-4.78 10.672-10.671 10.672h-36.469c-8.234-18.812-27.047-31.999-48.858-31.999-21.827 0-40.624 13.188-48.874 31.999h-25.797v-74.671H490.663v21.344zM319.994 303.99v-64h42.672v64h-42.672zm64 .001v-64h106.669v64H383.994zm106.67-85.328H53.328c-5.875 0-10.656 4.773-10.656 10.664v85.334c0 5.891 4.781 10.656 10.656 10.656h117.341v74.671h-25.812c-8.25-18.812-27.031-31.999-48.858-31.999h-74.67V207.992c0-5.875 4.781-10.664 10.672-10.664H479.993c5.891 0 10.671 4.789 10.671 10.664v10.671zM106.67 239.99v64H63.999v-64h42.671z"/><path d="M88.452 413.784c-4.156 4.156-4.156 10.906 0 15.078a10.666 10.666 0 0015.094 0c4.156-4.172 4.156-10.922 0-15.078a10.668 10.668 0 00-15.094 0zM387.118 413.784c-4.171 4.156-4.171 10.906 0 15.078 4.172 4.172 10.922 4.172 15.078 0 4.172-4.172 4.172-10.922 0-15.078-4.156-4.171-10.906-4.171-15.078 0z"/></svg>
              </span>
              {transport.trolleybus}
            </p>
          </div>}

          {tram && <div>
            <p className="mb-0">{`${!EN ? 'Трамваи' : 'Trams'}`}</p>
            <p>
              <span className="panel__icon">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="60" height="40" fill="#fff"><path
                  d="M144,254a17,17,0,0,0-17-17H65a17,17,0,0,0-17,17v39a17,17,0,0,0,17,17h62a17,17,0,0,0,17-17Zm-14,39a3,3,0,0,1-3,3H65a3,3,0,0,1-3-3V254a3,3,0,0,1,3-3h62a3,3,0,0,1,3,3Z"/><path
                  d="M355,254a17,17,0,0,0-17-17H316a17,17,0,0,0-17,17v39a17,17,0,0,0,17,17h22a17,17,0,0,0,17-17Zm-14,39a3,3,0,0,1-3,3H316a3,3,0,0,1-3-3V254a3,3,0,0,1,3-3h22a3,3,0,0,1,3,3Z"/><path
                  d="M493.028,406H18.972a7,7,0,1,0,0,14H493.028a7,7,0,0,0,0-14Z"/><path
                  d="M152.405,371h13.857c3.343,19,20.632,35,41.405,35s38.062-16,41.405-35h13.856c3.343,19,20.632,35,41.405,35s38.062-16,41.4-35H359.6c3.343,19,20.632,35,41.4,35s38.062-16,41.4-35h20.768a32.342,32.342,0,0,0,32.091-32.341,7.836,7.836,0,0,0-.341-2.282L446.007,185.5A26.761,26.761,0,0,0,420.32,167H258.781l-43.923-23.888L283.724,107H310a7,7,0,0,0,0-14H234a7,7,0,0,0,0,14h19.578l-56.829,29.551A6.809,6.809,0,0,0,193,142.572a7.3,7.3,0,0,0,3.655,6.39L229.478,167H44.866A26.494,26.494,0,0,0,18,193.5v150C18,358.388,29.979,371,44.866,371H69.6c3.343,19,20.632,35,41.405,35S149.062,390,152.405,371ZM270,357H234V251h36Zm-50,0H184V251h36Zm-12.333,35a28.121,28.121,0,0,1-27.114-21h54.228A28.121,28.121,0,0,1,207.667,392Zm96.666,0a28.121,28.121,0,0,1-27.114-21h54.228A28.121,28.121,0,0,1,304.333,392ZM401,392a28.121,28.121,0,0,1-27.114-21h54.228A28.121,28.121,0,0,1,401,392Zm63.746-103h-55.88C401.7,289,396,282.668,396,275.5v-42c0-7.168,5.7-12.5,12.866-12.5h33.862ZM32,343.5v-150c0-7.168,5.7-12.5,12.866-12.5H420.32a12.966,12.966,0,0,1,12.368,9l5.506,17H408.866A26.494,26.494,0,0,0,382,233.5v42c0,14.888,11.979,27.5,26.866,27.5h60.413l11.956,36.926A18.113,18.113,0,0,1,463.173,357H284V243.5c0-3.866-3.134-6.5-7-6.5H177c-3.866,0-7,2.634-7,6.5V357H44.866C37.7,357,32,350.668,32,343.5ZM111,392a28.121,28.121,0,0,1-27.114-21h54.228A28.121,28.121,0,0,1,111,392Z"/></svg>
              </span>
              {transport.tram}
            </p>
          </div>}
        </div>}

        <div className="text-right">
          <a className="button button_type_secondary" target="_blank" href={`https://www.google.com/maps/search/?api=1&query=${lat},${lon}`}>{`${!EN ? 'Открыть в Google картах' : 'Open Google Maps'}`}</a>
        </div>

      </div>

    </div>
  )
};

export default Panel;
